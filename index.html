<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <title>pra ti</title>
    <style>
      body {
        margin: 0;
        font-family: "Arial", sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background: linear-gradient(135deg, #a8e6cf, #3d8168);
        background-size: cover;
        color: #1b4332;
      }
      .container {
        text-align: center;
        background: #f0f7f4;
        padding: 2rem;
        border-radius: 16px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }
      input[type="text"] {
        padding: 0.5rem;
        font-size: 16px;
        border: 2px solid #3d8168;
        border-radius: 8px;
      }
      button {
        margin-top: 1rem;
        padding: 0.7rem 1.5rem;
        background-color: #3d8168;
        color: #fff;
        border: none;
        border-radius: 8px;
        cursor: pointer;
      }
      .error {
        color: #e63946;
        margin-top: 0.5rem;
        display: none;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Quem Ã© vocÃª?</h1>
      <input id="nameInput" type="text" placeholder="Nome" />
      <button id="enterButton">Entrar</button>
      <p class="error" id="errorMessage">Por favor, digite seu nome.</p>
    </div>

    <script>
      // âœ… VariÃ¡veis globais para guardar as escolhas
      let userChoices = {
        name: "",
        activity: "",
        place: "",
        date: "",
        time: "",
      };

      function startValentinesInvite() {
        Swal.fire({
          title: "EBA, Ã‰ vocÃª! ðŸ’–",
          text: "Gostaria de sair comigo? :>",
          imageUrl: "7bc7db33a68241174b95762c994b364c (1).gif",
          imageWidth: 200,
          imageHeight: 200,
          showDenyButton: true,
          showCancelButton: true,
          confirmButtonText: "Sim! ðŸ’˜",
          denyButtonText: "NÃ£o ðŸ˜¢",
          cancelButtonText: "Talvez ðŸ¤”",
        }).then((result) => {
          if (result.isConfirmed) {
            askPreferences();
          } else if (result.isDenied) {
            Swal.fire("Eita! ðŸ˜¢", "Triste, porÃ©m tenha um bom dia", "info");
          } else {
            Swal.fire("Sem pressa!", "Quando estiver pronta me avisa ðŸ¥°", "info");
          }
        });
      }

      function askPreferences() {
        Swal.fire({
          title: "Ã“timo! ðŸ’ž",
          text: "O que vocÃª gostaria de fazer?",
          input: "select",
          inputOptions: {
            casual: "ðŸ• Barzinho",
            dinner: "ðŸ½ï¸ Jantar",
            lunch: "ðŸ” AlmoÃ§o",
            park: "ðŸ–ï¸ Parque",
            cafe: "â˜• CafÃ©",
            cinema: "ðŸŽ¬ Festival de Cinema Italiano SESC",
             games: "ðŸ•¹ï¸ Fliperamas"
          },
          inputPlaceholder: "Escolha algo",
          showCancelButton: true,
        }).then((result) => {
          if (result.value) {
            userChoices.activity = result.value;
            askPlace(result.value);
          }
        });
      }

      function askPlace(dateType) {
        const options = {
          casual: "um bom barzinho",
          dinner: "um jantar tranquilo",
          lunch: "um almoÃ§o especial",
          park: "um passeio no parque",
          cafe: "um cafÃ© aconchegante",
          cinema: "um festival de cinema italiano ðŸŽ¬",
          games: "uma sessÃ£o de fliperama ðŸ•¹ï¸"
        };
        Swal.fire({
          title: "Ã“tima escolha!",
          text: `Onde vocÃª gostaria de ${options[dateType]}?`,
          input: "text",
          inputPlaceholder: "Ex: aquele barzinho da esquina...",
          showCancelButton: true,
        }).then((result) => {
          if (result.value) {
            userChoices.place = result.value;
            askDate(dateType);
          }
        });
      }

      function askDate(dateType) {
        Swal.fire({
          title: "Escolha a data! ðŸ“…",
          input: "date",
          showCancelButton: true,
        }).then((result) => {
          if (result.value) {
            userChoices.date = result.value;
            askTime(dateType);
          }
        });
      }

      function askTime(dateType) {
        Swal.fire({
          title: "Qual horÃ¡rio? â°",
          input: "select",
          inputOptions: {
            morning: "ðŸŒ… ManhÃ£",
            afternoon: "ðŸŒž Tarde",
            evening: "ðŸŒ™ Noite",
          },
          inputPlaceholder: "Selecione a hora",
          showCancelButton: true,
        }).then((result) => {
          if (result.value) {
            userChoices.time = result.value;
            showSummary();
          }
        });
      }

      function showSummary() {
        const timeMap = {
          morning: "pela manhÃ£",
          afternoon: "Ã  tarde",
          evening: "Ã  noite",
        };

        Swal.fire({
          title: "YAAAAY Ã‰ UM ENCONTRO! ðŸŽ‰",
          html: `
            <p><b>Nome:</b> ${userChoices.name}</p>
            <p><b>Atividade:</b> ${userChoices.activity}</p>
            <p><b>Local:</b> ${userChoices.place}</p>
            <p><b>Data:</b> ${userChoices.date}</p>
            <p><b>Hora:</b> ${timeMap[userChoices.time]}</p>
          `,
          icon: "success",
          confirmButtonText: "Mal posso esperar! ðŸ’˜",
        });

        // âœ… Enviar dados para o Google Sheets
        fetch("https://script.google.com/macros/s/AKfycbzZw3wW3D4ea7V-D7egk-fpukvytt03sHLGsw7nQap0HiHmCPuagr2zgivsNdFAnCqQ/exec", {
          method: "POST",
          mode: "no-cors",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(userChoices),
        })
        .then(() => console.log("âœ… Dados enviados com sucesso ao Google Sheets"))
        .catch(err => console.error("Erro ao enviar:", err));
      }

      // âœ… Aceita qualquer nome (remove a limitaÃ§Ã£o anterior)
      const enterButton = document.getElementById("enterButton");
      const nameInput = document.getElementById("nameInput");
      const errorMessage = document.getElementById("errorMessage");

      enterButton.addEventListener("click", () => {
        const name = nameInput.value.trim();
        if (name) {
          userChoices.name = name;
          startValentinesInvite();
          errorMessage.style.display = "none";
        } else {
          errorMessage.style.display = "block";
        }
      });
    </script>
  </body>
</html>
